# Production Deployment Configuration for Causal Discovery Toolkit
# Generated by Autonomous SDLC Process

apiVersion: v1
kind: production-config
metadata:
  name: causal-discovery-toolkit
  version: "1.0.0"
  generated: true
  autonomous_sdlc: true

# Application Configuration
application:
  name: "causal-discovery-toolkit"
  description: "Advanced causal inference and discovery tools for explainable AI"
  version: "1.0.0"
  environment: "production"
  
  # Performance Settings
  performance:
    max_workers: 8
    memory_limit: "4Gi"
    timeout_seconds: 300
    enable_parallel: true
    optimization_level: "balanced"
    
  # Security Settings
  security:
    enable_audit_logging: true
    differential_privacy: true
    privacy_epsilon: 1.0
    max_memory_mb: 4000
    secure_temp_files: true
    
  # Resource Limits
  resources:
    cpu_limit: "2000m"
    memory_limit: "4Gi"
    storage_limit: "10Gi"
    tmp_storage: "2Gi"

# Container Configuration
container:
  image: "causal-discovery-toolkit:latest"
  pull_policy: "Always"
  
  # Environment Variables
  environment:
    - name: "ENVIRONMENT"
      value: "production"
    - name: "LOG_LEVEL"
      value: "INFO"
    - name: "ENABLE_MONITORING"
      value: "true"
    - name: "MAX_WORKERS"
      value: "8"
    - name: "MEMORY_LIMIT_MB"
      value: "4000"
      
  # Health Checks
  health_check:
    enabled: true
    endpoint: "/health"
    initial_delay: 30
    period: 10
    timeout: 5
    failure_threshold: 3

# Scaling Configuration
scaling:
  enabled: true
  min_replicas: 2
  max_replicas: 10
  target_cpu_utilization: 70
  target_memory_utilization: 80
  
  # Custom Metrics
  custom_metrics:
    - name: "causal_discovery_requests_per_second"
      target_value: 100
    - name: "average_processing_time"
      target_value: 30

# Monitoring and Observability
monitoring:
  enabled: true
  
  # Metrics
  metrics:
    enabled: true
    port: 9090
    path: "/metrics"
    
  # Logging
  logging:
    level: "INFO"
    format: "json"
    audit_enabled: true
    retention_days: 30
    
  # Tracing
  tracing:
    enabled: true
    sampling_rate: 0.1
    
  # Alerts
  alerts:
    - name: "high_error_rate"
      condition: "error_rate > 0.05"
      duration: "5m"
    - name: "high_memory_usage"
      condition: "memory_usage > 0.9"
      duration: "2m"
    - name: "slow_requests"
      condition: "avg_response_time > 30s"
      duration: "5m"

# Storage Configuration
storage:
  # Persistent Storage
  persistent:
    enabled: true
    size: "10Gi"
    storage_class: "fast-ssd"
    mount_path: "/app/data"
    
  # Temporary Storage
  temporary:
    enabled: true
    size: "2Gi"
    mount_path: "/tmp"
    
  # Cache Storage
  cache:
    enabled: true
    size: "1Gi"
    mount_path: "/app/cache"

# Network Configuration
network:
  # Service Configuration
  service:
    type: "ClusterIP"
    port: 8080
    target_port: 8080
    
  # Ingress Configuration
  ingress:
    enabled: true
    hostname: "causal-discovery.company.com"
    tls_enabled: true
    annotations:
      nginx.ingress.kubernetes.io/proxy-body-size: "100m"
      nginx.ingress.kubernetes.io/proxy-read-timeout: "300"
      
# Security Configuration
security:
  # Pod Security
  pod_security:
    run_as_non_root: true
    run_as_user: 1000
    run_as_group: 1000
    fs_group: 1000
    
  # Network Policies
  network_policy:
    enabled: true
    ingress_rules:
      - from_namespaces: ["api-gateway"]
        ports: [8080]
    egress_rules:
      - to_namespaces: ["database"]
        ports: [5432]
      - to_external: true  # For external APIs
        
  # Resource Policies
  resource_policy:
    cpu_request: "500m"
    memory_request: "1Gi"
    cpu_limit: "2000m"
    memory_limit: "4Gi"

# Quality Gates
quality_gates:
  # Performance Requirements
  performance:
    max_response_time: "30s"
    min_throughput: "10 rps"
    max_error_rate: "5%"
    
  # Reliability Requirements
  reliability:
    min_uptime: "99.9%"
    max_downtime: "8.76 hours/year"
    
  # Security Requirements
  security:
    vulnerability_scan: "required"
    security_audit: "required"
    compliance_check: "required"

# Backup and Recovery
backup:
  enabled: true
  schedule: "0 2 * * *"  # Daily at 2 AM
  retention: "30d"
  storage_location: "s3://company-backups/causal-discovery"
  
  # Recovery Testing
  recovery_testing:
    enabled: true
    schedule: "0 6 * * 0"  # Weekly on Sunday at 6 AM
    max_recovery_time: "1h"

# Deployment Strategy
deployment:
  strategy: "rolling_update"
  rolling_update:
    max_unavailable: "25%"
    max_surge: "25%"
    
  # Blue-Green Deployment (Alternative)
  blue_green:
    enabled: false
    traffic_split: 50
    
  # Canary Deployment (Alternative)
  canary:
    enabled: false
    initial_traffic: 10
    increment: 10
    interval: "5m"

# Feature Flags
feature_flags:
  enable_experimental_algorithms: false
  enable_gpu_acceleration: false
  enable_distributed_processing: true
  enable_real_time_processing: false
  
# Integration Points
integrations:
  # Database
  database:
    enabled: false
    type: "postgresql"
    connection_pool_size: 10
    
  # Message Queue
  message_queue:
    enabled: false
    type: "rabbitmq"
    
  # External APIs
  external_apis:
    enabled: true
    rate_limit: "1000/hour"
    timeout: "30s"
    
  # Data Sources
  data_sources:
    - type: "file_upload"
      max_size: "100MB"
      allowed_formats: ["csv", "json", "parquet"]
    - type: "api_endpoint"
      authentication: "required"
      
# Compliance and Governance
compliance:
  data_retention: "2 years"
  data_classification: "internal"
  privacy_level: "high"
  audit_requirements:
    - "SOX compliance"
    - "GDPR compliance"
    - "Data governance"
    
# Documentation
documentation:
  api_docs: "/docs"
  swagger_ui: "/swagger"
  monitoring_dashboard: "/dashboard"
  
# Support and Maintenance
support:
  team: "data-science-platform"
  on_call: "platform-team"
  escalation: "engineering-manager"
  
  # Maintenance Windows
  maintenance:
    schedule: "0 4 * * 0"  # Sunday 4 AM
    max_duration: "2h"
    notification_advance: "24h"